<!-- views/profile.ejs -->
<head>
    <link rel="stylesheet" href="/css/vitamins_page.css" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/cart.css" crossorigin="anonymous">
</head>
<body ng-app="app">
<div  ng-controller="CartController"  ng-init="init('<%= JSON.stringify(vitamin_info) %>' )">
<div class="container">

    <div class="page-header text-center">
        <h1></span> Cart </h1>
    
    </div>
     <% if (message.length > 0) { %>
        <div class="alert alert-success"><%= message %></div>
    <% } %>

    <div class="row">
        <!-- LOCAL INFORMATION -->
        <div class="col-sm-6">
            <form method="POST" action="/go_to_checkout">
            <div class="well">
                <h3>Cart</h3>
                
                <table class="vitamins_table cart_table">
                    <tr>
                        <th>Vitamin </th>
                        <th> Dosage </th>
                        <th> Quantity </th>
                        <th> Price </th>
                    </tr>
                    
                        <tbody ng-repeat="custom_vitamin in cart" class="custom_vitamin_divider">
                        
                            <tr ng-repeat="vitamin_id in custom_vitamin.vitamin_id" >
                            
                            <td>{{vitamin_map[vitamin_id]}}</td>
                            <td>{{custom_vitamin.dosage[$index]}}{{}}</td>
                            <td ng-show="{{$last}}">  {{custom_vitamin.number_of_pills}}</td>
                             <td ng-show="{{$last}}">  {{custom_vitamin.price}}</td>
                             <td ng-show="{{$last}}">  <button type="submit" class="form-control save_for_later" name="save_for_later"value="{{custom_vitamin._id}}" formaction="/handle_cart">Save For Later</button></td>
                             <td ng-show="{{$last}}">  <button type="submit" class="form-control save_for_later" name="delete" value="{{custom_vitamin._id}}" formaction="/handle_cart">X</button></td>
                    </tr>
                </tbody>
                </table>
                <input type="submit" class="form-control save_for_later" value="Checkout" name="checkout"/>

            </div>
            <div class="well">
                <h3>Save For Later </h3>
               <table class="vitamins_table cart_table">
                    <tr>
                        <th>Vitamin </th>
                        <th> Dosage </th>
                        <th> Quantity </th>
                        <th> Price </th>
                    </tr>
                    
                        <tbody ng-repeat="custom_vitamin in save_for_later" class="custom_vitamin_divider">
                        
                            <tr ng-repeat="vitamin_id in custom_vitamin.vitamin_id" >
                            
                            <td>{{vitamin_map[vitamin_id]}}</td>
                            <td>{{custom_vitamin.dosage[$index]}}{{}}</td>
                            <td ng-show="{{$last}}">  {{custom_vitamin.number_of_pills}}</td>
                             <td ng-show="{{$last}}">  {{custom_vitamin.price}}</td>
                             <td ng-show="{{$last}}">  <button type="submit" class="form-control save_for_later" name="add_to_cart" value="{{custom_vitamin._id}}" formaction="/handle_cart">Add To Cart</button></td>
                             <td ng-show="{{$last}}">  <button type="submit" class="form-control save_for_later" name="delete" value="{{custom_vitamin._id}}" formaction="/handle_cart">X</button></td>
                    </tr>
                </tbody>
                </table>            
            </div>
        </form>

    </div>
</div>
</body>